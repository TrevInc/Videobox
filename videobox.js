/*
	Videobox v2 - jQuery lightbox clone for displaying iframe videos
	Based on Slimbox 2.04 
		(c) 2007-2010 Christophe Beyls <http://www.digitalia.be>
		MIT-style license.
*/

(function vb(g){var f=g(window),e,l,A=-1,c,d,z,p,m,j=!window.XMLHttpRequest,o=[],y=document.documentElement,s,x,r,w,k,t,b,a;g(function h(){g("body").append(g([s=g('<div id="vbOverlay" />').click(g.vb_close)[0],x=g('<div id="vbCenter" />')[0],w=g('<div id="vbBottomContainer" />')[0]]).css("display","none"));r=g('<iframe id="vbVideo" frameborder="0" allowfullscreen="true" oallowfullscreen msallowfullscreen webkitallowfullscreen mozallowfullscreen />').appendTo(x)[0];k=g('<div id="vbBottom" />').appendTo(w).append([a=g('<a id="vbCloseLink" href="#" />').click(g.vb_close)[0],t=g('<div id="vbCaption" />')[0],b=g('<div id="vbNumber" />')[0],g('<div style="clear: both;" />')[0]])[0]});g.videobox=function(E,D,C){e=g.extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,videoWidth:640,videoHeight:363,videoFadeDuration:400,captionAnimationDuration:400,counterText:"Video {x} of {y}",disableClose:false},C);if(typeof E=="string"){E=[[E,D]];D=0}if(e.disableClose){g(a).hide();g(a).unbind("click");g(s).unbind("click");e.closeKeys=[]}z=f.scrollTop()+(f.height()/2);p=e.initialWidth;m=e.initialHeight;g(x).css({top:Math.max(0,z-(m/2)),width:p,height:m,marginLeft:-p/2}).show();d=j||(s.currentStyle&&(s.currentStyle.position!="fixed"));if(d){s.style.position="absolute"}g(s).css("opacity",e.overlayOpacity).fadeIn(e.overlayFadeDuration);v();n(1);l=E;e.loop=e.loop&&(l.length>1);return B(D)};g.vb_close=function(){if(A>=0){q();A=-1;g(x).hide();g(s).stop().fadeOut(e.overlayFadeDuration,n)}g(a).show();g(a).click(g.vb_close);g(s).click(g.vb_close);return false};g.fn.videobox=function(D,H,F){H=H||function C(I){return[I.href,I.title]};F=F||function G(){return true};var E=this;return E.unbind("click").click(function G(){var K=this,M=0,L,I=0,J;L=g.grep(E,function(O,N){return F.call(K,O,N)});for(J=L.length;I<J;++I){if(L[I]==K){M=I}L[I]=H(L[I],I)}return g.videobox(L,M,D)})};function v(){var D=f.scrollLeft(),C=f.width();g([x,w]).css("left",D+(C/2));if(d){g(s).css({left:D,top:f.scrollTop(),width:C,height:f.height()})}}function n(C){if(C){g("object").add(j?"select":"embed").each(function(E,F){o[E]=[F,F.style.visibility];F.style.visibility="hidden"})}else{g.each(o,function(E,F){F[0].style.visibility=F[1]});o=[]}var D=C?"bind":"unbind";f[D]("scroll resize",v)}function B(C){if(C>=0){A=C;c=l[A][0];q();i()}return false}function i(){x.className="";var D=l[A][2]||e.videoWidth;var C=l[A][3]||e.videoHeight;if(D>(f.width()-20)){D=f.width()-20}C=(C*D)/(l[A][2]||e.videoWidth);g(r).css({visibility:"hidden",display:""});r.src=c;g(r).width(D);g(r).height(C);g(t).html(l[A][1]||"");g(b).html((((l.length>1)&&e.counterText)||"").replace(/{x}/,A+1).replace(/{y}/,l.length));p=parseInt(D)+20;m=parseInt(C)+20;var E=Math.max(0,z-(m/2));g(x).animate({height:m,top:E,width:p,marginLeft:-p/2},e.resizeDuration,e.resizeEasing);g(x).queue(function F(){g(w).css({width:p,top:E+m,marginLeft:-p/2,visibility:"hidden",display:""});g(r).css({display:"none",visibility:"",opacity:""}).fadeIn(e.videoFadeDuration,u)})}function u(){g(k).css("marginTop",-k.offsetHeight).animate({marginTop:0},e.captionAnimationDuration);w.style.visibility=""}function q(){g([x,r,k]).stop(true);g([r,w]).hide();r.src="";r.title=""}})(jQuery);

// Content player (no-lightbox) effec
var displayvideo;var displayvideolink;var open_frame;jQuery(document).ready(function(a){displayvideolink=function(g,b,d,j){var c=document.getElementById("vb_video_"+g);var i=document.getElementById("vb_close_"+g);var f=document.getElementById("vb_title_"+g);var e=document.getElementById("vb_separator_"+g);var h=c.parentNode.parentNode.parentNode.parentNode;if((c.getAttribute("style").indexOf("block")==-1)){if(open_frame!=null){displayvideolink(open_frame,"",0,0)}open_frame=g;f.style.display="none";e.style.display="none";c.style.display="block";i.style.display="block";c.parentNode.parentNode.style.display="block";c.src=b;h.style.display="inline-block";a(c).animate({height:j,width:d},{duration:400,easing:"swing",queue:false});h.style.styleFloat="right";h.style.cssFloat="right"}else{i.style.display="none";a(c).animate({height:0,width:0},{duration:0,easing:"swing",queue:false});f.style.display="inline";e.style.display="inline";c.src="";if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.oCancelFullScreen){document.oCancelFullScreen()}else{if(document.msCancelFullScreen){document.msCancelFullScreen()}}}}}c.style.display="none";c.parentNode.parentNode.style.display="none";h.style.display="inline";h.style.styleFloat="";h.style.cssFloat="";open_frame=null}};displayvideo=function(h,b,d,k,f,i){var c=document.getElementById("vb_video_"+h);var e=document.getElementById("vb_thumb_"+h);var j=document.getElementById("vb_close_"+h);var g=document.getElementById("vb_title_"+h);if((c.getAttribute("style").indexOf("block")==-1)){e.style.display="none";c.style.display="block";c.parentNode.style.display="block";j.style.display="block";c.src=b;a(c).animate({height:k,width:d},{duration:400,easing:"swing",queue:false});a(g).animate({width:d},{duration:400,easing:"swing",queue:false})}else{j.style.display="none";a(c).animate({height:i,width:f},{duration:0,easing:"swing",queue:false});g.style.width=f+"px";c.src="";if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.oCancelFullScreen){document.oCancelFullScreen()}else{if(document.msCancelFullScreen){document.msCancelFullScreen()}}}}}c.style.display="none";c.parentNode.style.display="none";e.style.display="block"}}});

// AUTOLOAD CODE BLOCK (MAY BE CHANGED OR REMOVED)
jQuery(function vb($) {
	$("a[rel^='videobox']").videobox({ /* Put custom options here */ }, function vbl(el) {
		return [el.href, el.getAttribute("title"), el.getAttribute("videowidth"), el.getAttribute("videoheight")];
	}, function vbl(el) {
		return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
	});
});